
if [ module-info mode load ] {
  if [ is-loaded PrgEnv-intel ] {
  } else {
    if [ is-loaded PrgEnv-cray ] {
      module swap PrgEnv-cray PrgEnv-intel
    }
    if [ is-loaded PrgEnv-gnu ] {
      module swap PrgEnv-gnu PrgEnv-intel
    }
  }
  module swap craype-haswell craype-mic-knl
  module swap intel intel/18.0.0.128
  module load gcc/6.3.0
  module load git
  if [ is-loaded cmake ] {
    module swap cmake cmake/3.8.2
  } else {
    module load cmake/3.8.2
  }
  setenv CRAYPE_LINK_TYPE dynamic
}
